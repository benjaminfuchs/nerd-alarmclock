#!/usr/bin/python3
# --------------------------------------------------------------------------
# Class definition of Button
#
# Author: Benjamin Fuchs
# License: GPL3
#
# Website: https://github.com/benjaminfuchs/who_disposer
#
# --------------------------------------------------------------------------

import datetime
import smbus
import time


class Sensor():
    """ Sensor class """

    def __init__(self, address):
        """ Constructor """
        self._i2c = smbus.SMBus(1)
        self._address = 0x70

    def distance(self):
        """ get current distance """
        self._i2c.write_byte_data(self._address, 0, 81)
        time.sleep(0.07)  # 80ms snooze while pinging
        distance = self._srf02_read()
        return distance

    def srf02_read(self):
        high = pi.i2c_read_word_data(self._address, 0x02)
        low = pi.i2c_read_word_data(self._address, 0x03)

        ll = int(bin(low & 0b1111111), 2)
        lh = int(bin(low >> 15), 2)
        hl = int(bin(high & 0b11), 2)
        d = hl * 255 + lh * 128 + ll
        return d
